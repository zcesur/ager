{
    "contents" : "#' Preprocess and clean the data\n#'\n#' \\code{scrub}\n#'\n#' @param year an academic year of which faculty information is desired.\n#' @return The output is a character vector. Each element of this vector is a character\n#' string that contains raw information on a faculty member.\n#' @examples\n#' scrub(\"2011-12\")\nscrub <- function(year){\n  # Open up a txt file and store lines of information as character strings of the\n  # vector 'data'\n  data <- paste(year, \".txt\", sep = \"\") %>%\n    system.file(\"extdata\", ., package = \"ager\") %>%\n    readLines(skipNul = TRUE)\n\n  # Remove leftovers from the previous page. In this case, we do not have any, however\n  # there are, for instance in the catalog from the year 2010-2011, some.\n  data <- data[-(1:(grep(\"FACULTY\", data)[1]))]\n\n  # Remove all other irrelevant data at the beginning of the document until coming\n  # across a line containing a comma\n  data <- data[-(1:(grep(\",\", data)[1] - 1))]\n\n  # Remove the strings which are of length 0 and those containing page numbers. 4 is not\n  # chosen arbitrarily but rather based on other years' documents. For instance in the\n  # previous 2 years, the strings that contain pages are formatted as 3-digit integer and\n  # a space.\n  data <- setdiff(data, data[nchar(data) <= 4])\n\n  if (year == \"2013-14\"){\n  # Clean up text if it is formatted with hard line endings\n  short_lines <- order(nchar(data), decreasing=FALSE)[1:15]\n  long_lines <- order(nchar(data), decreasing=TRUE)[1:15]\n\n  # Evaluate which of the long lines are immediately followed by a short line\n  cut_lines <- short_lines[(short_lines - 1) %in% long_lines]\n\n  # Join the cut off line with the line above\n  data[cut_lines - 1] <- paste(data[cut_lines - 1], data[cut_lines], sep=\" \")\n\n  # Remove cut off lines\n  data <- setdiff(data, data[cut_lines])\n  }\n  return(data)\n}",
    "created" : 1454456596223.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "356009314",
    "id" : "84CD843A",
    "lastKnownWriteTime" : 1454482962,
    "path" : "C:/Users/Zafer/Desktop/R Project/packages/ager/R/scrub.R",
    "project_path" : "R/scrub.R",
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "type" : "r_source"
}